(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc22feae"],{"0d65":function(t,e,a){},1360:function(t,e,a){"use strict";a("cee4a")},"1a34":function(t,e,a){t.exports=a.p+"img/calendar.e3c7d004.svg"},"459b":function(t,e,a){},"5d27":function(t,e,a){t.exports=a.p+"img/restaurant.64e7e302.svg"},"6b11":function(t,e,a){"use strict";a("0d65")},"6d7f":function(t,e,a){"use strict";var s=a("2fa3"),r=function(){return localStorage.getItem("token")};e["a"]={getReservations:function(){return s["b"].get("/user/reservations",{headers:{Authorization:"Bearer ".concat(r())}})},getReservation:function(t){return s["b"].get("/user/reservations/".concat(t),{headers:{Authorization:"Bearer ".concat(r())}})},addReservation:function(t){return s["b"].post("/user/reservations",t,{headers:{Authorization:"Bearer ".concat(r())}})}}},b855:function(t,e,a){t.exports=a.p+"img/profile.0f180f0a.svg"},cee4a:function(t,e,a){},e0f8:function(t,e,a){t.exports=a.p+"img/clock.8f8a9c12.svg"},e4bb:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"history-page"},[a("Navbar"),a("div",{staticClass:"history-container"},[a("div",{staticClass:"title"},[t._v("用餐紀錄")]),a("div",{staticClass:"history-wrapper"},[a("div",{staticClass:"tab-container"},[a("div",{staticClass:"tab ",class:{active:t.tabFuture},on:{click:function(e){t.tabFuture=!0}}},[t._v(" 即將前往 "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabFuture,expression:"tabFuture"}],staticClass:"active-line"})]),a("div",{staticClass:"tab",class:{active:!t.tabFuture},on:{click:function(e){t.tabFuture=!1}}},[t._v(" 過去紀錄 "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabFuture,expression:"!tabFuture"}],staticClass:"active-line"})]),a("div",{staticClass:"divider"})]),a("div",{ref:"reservation-container",staticClass:"reservation-container"},[t.tabFuture?a("FutureReservation",{attrs:{reservations:t.futureReservation}}):t._e(),t.tabFuture?t._e():a("PastReservation",{attrs:{reservations:t.pastReservation}})],1)])]),a("div",{ref:"footer"},[a("Footer")],1)],1)},r=[],i=(a("4de4"),a("fb6a"),a("96cf"),a("1da1")),n=a("5530"),c=a("2fa3"),o=a("2f62"),d=a("6d7f"),u=a("d178"),l=a("fd2d"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"future-reservation"},[t.restaurants.length<1?s("div",{staticClass:"more-container"},[s("div",{staticClass:"more-title"},[t._v("還沒想好要吃什麼？")]),s("div",{staticClass:"illustration-wrapper"},[s("div",{staticClass:"cover"},[s("div",{staticClass:"button",on:{click:function(e){return t.$router.push("/map")}}},[t._v("現在就去找餐廳")])])])]):t._e(),t.restaurants.length>0?s("div",t._l(Math.ceil(t.restaurants.length/t.cardPerDeck),(function(e){return s("div",{key:"card-deck-"+e,staticClass:"card-deck"},[t._l(t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck),(function(e,r){return s("div",{key:e.id,staticClass:"booking-card real-card",class:{"last-card":3===r},on:{click:function(a){return t.$router.push("/users/history/"+e.id)}}},[s("div",{staticClass:"picture-wrapper"},[s("div",{staticClass:"picture",style:"background: url("+e.Restaurant_picture+") no-repeat center / cover"})]),s("div",{staticClass:"header"},[s("img",{staticClass:"icon restaurant",attrs:{src:a("5d27")}}),s("div",{staticClass:"name"},[t._v(t._s(e.Restaurant_name))])]),s("div",{staticClass:"divider"}),s("div",{staticClass:"info"},[s("div",{staticClass:"item-wrapper"},[s("img",{staticClass:"icon profile",attrs:{src:a("b855")}}),s("div",{staticClass:"number"},[t._v(t._s(e.partySize_adult)+"大"),e.partySize_kids>0?s("span",[t._v("小")]):t._e()])]),s("div",{staticClass:"item-wrapper"},[s("img",{staticClass:"icon time",attrs:{src:a("1a34")}}),s("div",{staticClass:"date"},[t._v(t._s(t._f("bookingDateFormat")(new Date(new Date(e.date.slice(0,10)).toDateString()))))])]),s("div",{staticClass:"item-wrapper"},[s("img",{staticClass:"icon time",attrs:{src:a("e0f8")}}),s("div",{staticClass:"time"},[t._v(t._s(e.time.slice(0,5)))])])])])})),t.cardPerDeck>1&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length<t.cardPerDeck?s("div",{staticClass:"booking-card"}):t._e(),t.cardPerDeck>2&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length<t.cardPerDeck?s("div",{staticClass:"booking-card"}):t._e()],2)})),0):t._e()])},f=[],h={data:function(){return{windowWidth:window.innerWidth,cardPerDeck:1,restaurants:[]}},props:{reservations:{type:Array}},created:function(){this.restaurants=this.reservations},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth})),this.defineCardDeck()},watch:{windowWidth:function(){this.defineCardDeck()},reservations:function(){this.restaurants=this.reservations}},methods:{defineCardDeck:function(){this.windowWidth<768?this.cardPerDeck=1:this.windowWidth<992?this.cardPerDeck=2:this.cardPerDeck=3}}},p=h,w=(a("1360"),a("2877")),C=Object(w["a"])(p,v,f,!1,null,null,null),k=C.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"past-reservation"},[t.restaurants.length<1?s("div",{staticClass:"more-container"},[s("div",{staticClass:"more-title"},[t._v("過去沒有訂位的紀錄")]),s("div",{staticClass:"illustration-wrapper"},[s("div",{staticClass:"cover"},[s("div",{staticClass:"button",on:{click:function(e){return t.$router.push("/map")}}},[t._v("現在就去找餐廳")])])])]):t._e(),t.restaurants.length>0?s("div",t._l(Math.ceil(t.restaurants.length/t.cardPerDeck),(function(e){return s("div",{key:"card-deck-"+e,staticClass:"card-deck"},[t._l(t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck),(function(e,r){return s("div",{key:e.id,staticClass:"booking-card",class:{"last-card":3===r},on:{click:function(a){return t.$router.push("/users/history/"+e.id)}}},[s("div",{staticClass:"picture-wrapper"},[s("div",{staticClass:"picture",style:"background: url("+e.Restaurant_picture+") no-repeat center / cover"})]),s("div",{staticClass:"header"},[s("img",{staticClass:"icon restaurant",attrs:{src:a("5d27")}}),s("div",{staticClass:"name"},[t._v(t._s(e.Restaurant_name))])]),s("div",{staticClass:"divider"}),s("div",{staticClass:"info"},[s("div",{staticClass:"item-wrapper"},[s("img",{staticClass:"icon profile",attrs:{src:a("b855")}}),s("div",{staticClass:"number"},[t._v(t._s(e.partySize_adult)+"大"),e.partySize_kids>0?s("span",[t._v("小")]):t._e()])]),s("div",{staticClass:"item-wrapper"},[s("img",{staticClass:"icon time",attrs:{src:a("1a34")}}),s("div",{staticClass:"date"},[t._v(t._s(t._f("bookingDateFormat")(new Date(new Date(e.date.slice(0,10)).toDateString()))))])]),s("div",{staticClass:"item-wrapper"},[s("img",{staticClass:"icon time",attrs:{src:a("e0f8")}}),s("div",{staticClass:"time"},[t._v(t._s(e.time.slice(0,5)))])])])])})),t.cardPerDeck>1&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length<t.cardPerDeck?s("div",{staticClass:"booking-card",staticStyle:{"box-shadow":"none",border:"none"}}):t._e(),t.cardPerDeck>2&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length+1<t.cardPerDeck?s("div",{staticClass:"booking-card",staticStyle:{"box-shadow":"none",border:"none"}}):t._e()],2)})),0):t._e()])},m=[],_={data:function(){return{windowWidth:window.innerWidth,cardPerDeck:1,restaurants:[]}},props:{reservations:{type:Array}},created:function(){this.restaurants=this.reservations},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth})),this.defineCardDeck()},watch:{windowWidth:function(){this.defineCardDeck()},reservations:function(){this.restaurants=this.reservations}},methods:{defineCardDeck:function(){this.windowWidth<768?this.cardPerDeck=1:this.windowWidth<992?this.cardPerDeck=2:this.cardPerDeck=3}}},g=_,D=(a("f4f6"),Object(w["a"])(g,b,m,!1,null,null,null)),P=D.exports,y={data:function(){return{tabFuture:!0,reservations:[],futureReservation:[],pastReservation:[]}},components:{Navbar:u["a"],Footer:l["default"],FutureReservation:k,PastReservation:P},created:function(){},mounted:function(){this.fetchReservations()},computed:Object(n["a"])({},Object(o["b"])(["currentUser","isAuthenticated"])),methods:{fetchReservations:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$loading.show({opacity:1,isFullPage:!0}),e.prev=1,e.next=4,d["a"].getReservations();case 4:s=e.sent,r=s.data,t.reservations=r.reservations,t.futureReservation=t.reservations.filter((function(t){return new Date(new Date(t.date.slice(0,10)).toDateString())>Date.now()})),t.pastReservation=t.reservations.filter((function(t){return new Date(new Date(t.date.slice(0,10)).toDateString())<=Date.now()})),a.hide(),e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](1),a.hide(),console.log(e.t0),c["a"].fire({icon:"error",title:"目前無法取得餐廳，請稍候"});case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}},R=y,F=(a("6b11"),Object(w["a"])(R,s,r,!1,null,null,null));e["default"]=F.exports},f4f6:function(t,e,a){"use strict";a("459b")},fb6a:function(t,e,a){"use strict";var s=a("23e7"),r=a("861d"),i=a("e8b5"),n=a("23cb"),c=a("50c4"),o=a("fc6a"),d=a("8418"),u=a("b622"),l=a("1dde"),v=a("ae40"),f=l("slice"),h=v("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),w=[].slice,C=Math.max;s({target:"Array",proto:!0,forced:!f||!h},{slice:function(t,e){var a,s,u,l=o(this),v=c(l.length),f=n(t,v),h=n(void 0===e?v:e,v);if(i(l)&&(a=l.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?r(a)&&(a=a[p],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return w.call(l,f,h);for(s=new(void 0===a?Array:a)(C(h-f,0)),u=0;f<h;f++,u++)f in l&&d(s,u,l[f]);return s.length=u,s}})}}]);
//# sourceMappingURL=chunk-dc22feae.bd455047.js.map